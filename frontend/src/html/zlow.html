  <div class="otherBody">
    <div id="hud-top">
      <div class="hud-section left">
        <div class="stat-item">
          <span id="time" class="stat-value">00:00</span>
        </div>
      </div>

      <div class="hud-section center">
        <div class="stats-row">
          <div class="stat-item">
            <div class="stat-value-group">
              <span id="speed" class="stat-value">0</span>
              <span class="stat-unit speed-unit">km/h</span>
            </div>
          </div>

          <div class="stat-item">
            <div class="stat-value-group">
              <span id="power" class="stat-value">0</span>
              <span class="stat-unit power-unit">W</span>
            </div>
          </div>

          <div class="stat-item">
            <div class="stat-value-group">
              <span id="distance" class="stat-value">0.00</span>
              <span class="stat-unit distance-unit">km</span>
            </div>
          </div>
        </div>
      </div>

      <div class="hud-section right">
        <div class="stat-item">
          <div class="stat-value-group">
            <span id="calories" class="stat-value">0</span>
            <span class="stat-unit">kcal</span>
          </div>
        </div>
      </div>
    </div>
  <div id="hud-bottom-container">
    <div id="hud-bottom">
<!-- Main controls view -->
      <div class="control-buttons main-controls">
        <button id="trainer-toggle-btn" class="hud-btn zlowBtn" title="Trainer">
          <span class="btn-text">Trainer</span>
        </button>
        
        <div class="hud-divider"></div>
        
        <button id="pacer-sync-btn" class="hud-btn zlowBtn" title="Sync Pacer">
          <span class="btn-text">Sync Pacer</span>
        </button>
        <button id="pause-btn" class="hud-btn zlowBtn" title="Pause">
          <span class="btn-text">Pause</span>
        </button>
        <button id="stop-btn" class="hud-btn zlowBtn" title="Stop">
          <span class="btn-text">Stop</span>
        </button>
        <button id="menu-btn" class="hud-btn zlowBtn" title="Exit to Main Menu" onclick="if (confirm('Return to Main Menu? Gameplay data will be lost.')) {window.location.href='./mainMenu.html'}">
          <span class="btn-text">Exit to Main Menu</span>
        </button>
      </div>

      <!-- Trainer controls view (hidden by default) -->
      <div class="control-buttons trainer-controls" hidden>
        <button id="trainer-back-btn" class="hud-btn zlowBtn" title="Back">
          <span class="btn-text">Back</span>
        </button>
        
        <div class="hud-divider"></div>
        
        <button id="connect-btn" class="hud-btn zlowBtn" title="Connect Trainer">
          <span class="btn-text">Connect Trainer</span>
        </button>
        <button id="calibrate-trainer-modal-btn" class="hud-btn zlowBtn" title="Calibrate Trainer">
          <span class="btn-text">Calibrate Trainer</span>
        </button>
      </div>
    </div>

    <!-- Dev hud - hidden by default -->
    <div id="dev-controls-hud" hidden>
      <span id="pacer" title="Pacer Speed">
        <label for="pacer-speed">Pacer:</label>
        <input
          id="pacer-speed"
          type="number"
          min="5"
          max="60"
          value="20"
          step="1"
        />
        <span class="speed-unit">km/h</span>
      </span>

      <span id="weight" title="Rider Weight">
        <label for="rider-weight">Weight:</label>
        <input
          id="rider-weight"
          type="number"
          min="40"
          max="150"
          value="70"
          step="1"
        />
        <span class="weight-unit">kg</span>
      </span>

      <button id="calories-reset-btn" class="hud-btn zlowBtn" title="Reset Calories">
        <span class="btn-text">Reset Calories</span>
      </button>

    </div>

    <!-- Pause overlay -->
    <div id="pause-overlay" aria-hidden="true">
      <div class="pause-dialog">
        Resuming in <span id="pause-countdown">10</span>…
      </div>
    </div>
  </div>


    <!-- Trainer Calibration Modal -->
<div id="calibration-modal" aria-hidden="true">
      <div class="calibration-modal-content">
        <h2>Trainer Calibration</h2>

        <div class="calibration-status" id="calibration-status-display">
          Ready to calibrate
        </div>

        <div class="calibration-steps">
          <h3>Calibration Process</h3>
          <div id="calibration-step-1" class="step active">
            <div class="step-title">1. Connect Trainer</div>
            <div class="step-description">
              Search for and connect to your Bluetooth trainer device
            </div>
          </div>
          <div id="calibration-step-2" class="step">
            <div class="step-title">2. Spin-Down Calibration</div>
            <div class="step-description">
              Pedal at steady power, then stop and let trainer coast to measure resistance
            </div>
          </div>
          <div id="calibration-step-3" class="step">
            <div class="step-title">3. Zero Offset</div>
            <div class="step-description">
              Calibrate power meter zero offset
            </div>
          </div>
          <div id="calibration-step-4" class="step">
            <div class="step-title">4. Complete</div>
            <div class="step-description">
              Calibration successful - ready to ride
            </div>
          </div>
        </div>

        <div class="calibration-data-display" id="calibration-data-display" style="display: none;">
          <div class="data-item">
            <span class="data-label">Power (W):</span>
            <span class="data-value" id="calibration-power-value">—</span>
          </div>
          <div class="data-item">
            <span class="data-label">Calibration State:</span>
            <span class="data-value" id="calibration-state-value">—</span>
          </div>
          <div class="data-item">
            <span class="data-label">Last Event:</span>
            <span class="data-value" id="calibration-last-event">—</span>
          </div>
        </div>

        <div class="calibration-button-group">
          <button id="calibration-connect-trainer-btn" class="hud-btn zlowBtn">
            Connect Trainer
          </button>
          <button id="calibration-start-btn" class="hud-btn zlowBtn" disabled>
            Start Calibration
          </button>
          <button id="calibration-skip-btn" class="hud-btn zlowBtn" style="background: #95a5a6;">
            Skip Calibration
          </button>
          <button id="calibration-close-btn" class="hud-btn zlowBtn" style="background: #e74c3c;">
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Workout overlay -->
    <div id="workout-overlay" aria-hidden="true">
      <div class="workout-dialog">
        Starting in <span id="workout-countdown">10</span>…
      </div>
    </div>

    <!-- Generate starting scene -->
    <a-scene id="scene" animation-timeline__1="timeline: #avatarMotion">
      <a-assets id="scene_assets">
        <!-- Add textures used to create the track and grass -->
        <img id="track-texture" src="../../resources/textures/Track.jpeg" />
        <img id="grass-texture" src="../../resources/textures/Grass.jpeg" />

        <!-- Building models -->
        <a-asset-item
          id="house-obj"
          src="../../resources/models/bgmodels/House.glb"
        ></a-asset-item>
        <a-asset-item
          id="tall-building-obj"
          src="../../resources/models/bgmodels/TallBuilding.glb"
        ></a-asset-item>
        <a-asset-item
          id="wide-building-obj"
          src="../../resources/models/bgmodels/WideBuilding.glb"
        ></a-asset-item>

        <!-- Add playermodel assets -->
        <a-asset-item
          id="bikeGLB"
          src="../../resources/models/playermodels/bikeV4.glb"
        ></a-asset-item>
        <a-asset-item
          id="maleGLB"
          src="../../resources/models/playermodels/maleV5.glb"
        ></a-asset-item>
        <a-asset-item
          id="femaleGLB"
          src="../../resources/models/playermodels/femaleV6.glb"
        ></a-asset-item>
        <a-asset-item 
          id="helmetGLB"
          src="../../resources/models/playermodels/helmet.glb"
          ></a-asset-item>

        <!-- Add cloud assets -->
        <a-asset-item
          id="cloud1"
          src="../../resources/models/bgmodels/cloud1.glb"
        ></a-asset-item>
        <a-asset-item
          id="cloud2"
          src="../../resources/models/bgmodels/cloud2.glb"
        ></a-asset-item>
        <a-asset-item
          id="cloud3"
          src="../../resources/models/bgmodels/cloud3.glb"
        ></a-asset-item>

        <!-- Add tree assets -->
        <a-asset-item
          id="tree1"
          src="../../resources/models/bgmodels/tree1.glb"
        ></a-asset-item>
        <a-asset-item
          id="tree2"
          src="../../resources/models/bgmodels/tree2.glb"
        ></a-asset-item>
        <a-asset-item
          id="tree3"
          src="../../resources/models/bgmodels/tree3.glb"
        ></a-asset-item>
        <a-asset-item
          id="tree-bush1"
          src="../../resources/models/bgmodels/bush1.glb"
        ></a-asset-item>
      </a-assets>
      <a-sky id="sky" color="#87ceeb" radius="5000"></a-sky>

      <!-- Checkerboard ground: green and brown tiles, covers the whole visible area -->
      <a-entity id="checkerboard-ground">
        <a-entity id="tiles"></a-entity>
      </a-entity>
  </div>